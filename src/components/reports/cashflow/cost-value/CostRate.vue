<template>
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 w-full">
    <div class="lg:col-span-2">
      <div class="card flex-grow bg-white">
        <div class="card__body text-center relative w-full">
          <CostChart
            :data="balance.data"
            :options="balance.options"
          ></CostChart>
        </div>
      </div>
    </div>
    <div class="card bg-white text-orange-900">
      <div class="card__body">
        <table class="w-full">
          <tbody>
            <tr>
              <td>Current Interest Rate</td>
              <td class="text-right">0.55%</td>
            </tr>
            <tr>
              <td>Average Interest Rate</td>
              <td class="text-right">0.41%</td>
            </tr>
          </tbody>
          <tfoot class="my-1">
            <tr class="">
              <th colspan="2" class="text-center my-2">
                <div class="dropdown relative text-white w-64">
                  <button
                    class="w-full bg-orange-900 dropdown-btn rounded-full flex justify-between px-4 py-1 transition-border-radius duration-500"
                    @click.self="expand($event)"
                  >
                    <span class="pointer-events-none"> Three months </span>
                    <i
                      class="fas fa-caret-down dropdown-icon pointer-events-none self-center"
                    ></i>
                  </button>
                  <div class="dropdown__menu absolute bg-orange-900">
                    <ul>
                      <li>July</li>
                      <li>June</li>
                      <li>May</li>
                      <li>April</li>
                      <li>March</li>
                    </ul>
                  </div>
                </div>
              </th>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>
</template>

<script>
import CostChart from "@/components/charts/CostChart";

export default {
  components: {
    CostChart,
  },

  data() {
    return {
      balance: {
        data: {
          labels: [
            "1999-01-15 18:37:39",
            "1999-02-15 18:37:39",
            "1999-03-15 19:37:39",
            "1999-04-15 20:37:39",
            "1999-05-15 21:37:39",
            "1999-06-15 22:37:39",
            "1999-07-15 18:37:39",
            "1999-08-15 19:37:39",
            "1999-09-15 20:37:39",
            "1999-10-15 21:37:39",
            "1999-12-15 22:37:39",
            "2000-01-15 18:37:39",
            "2000-02-15 18:37:39",
            "2000-03-15 19:37:39",
            "2000-04-15 20:37:39",
            "2000-05-15 21:37:39",
            "2000-06-15 22:37:39",
            "2000-07-15 18:37:39",
            "2000-08-15 19:37:39",
            "2000-09-15 20:37:39",
            "2000-10-15 21:37:39",
            "2000-12-15 22:37:39",
            "2001-01-15 18:37:39",
            "2001-02-15 19:37:39",
            "2001-03-15 20:37:39",
            "2001-04-15 21:37:39",
            "2001-05-15 22:37:39",
            "2001-06-15 22:37:39",
            "2001-07-15 18:37:39",
            "2001-08-15 19:37:39",
            "2001-09-15 20:37:39",
            "2001-10-15 21:37:39",
            "2001-12-15 22:37:39",
            "2002-01-15 18:37:39",
            "2002-02-15 19:37:39",
            "2002-03-15 20:37:39",
            "2002-04-15 21:37:39",
            "2002-05-15 22:37:39",
            "2002-06-15 22:37:39",
            "2002-07-15 18:37:39",
            "2002-08-15 19:37:39",
            "2002-09-15 20:37:39",
            "2002-10-15 21:37:39",
            "2002-12-15 22:37:39",
            "2003-01-15 18:37:39",
            "2003-02-15 19:37:39",
            "2003-03-15 20:37:39",
            "2003-04-15 21:37:39",
            "2003-05-15 22:37:39",
            "2003-06-15 22:37:39",
            "2003-07-15 18:37:39",
            "2003-08-15 19:37:39",
            "2003-09-15 20:37:39",
            "2003-10-15 21:37:39",
            "2003-12-15 22:37:39",
            "2004-01-15 18:37:39",
            "2004-02-15 19:37:39",
            "2004-03-15 20:37:39",
            "2004-04-15 21:37:39",
            "2004-05-15 22:37:39",
            "2004-06-15 22:37:39",
            "2004-07-15 18:37:39",
            "2004-08-15 19:37:39",
            "2004-09-15 20:37:39",
            "2004-10-15 21:37:39",
            "2004-12-15 22:37:39",
            "2005-01-15 18:37:39",
            "2005-02-15 19:37:39",
            "2005-03-15 20:37:39",
            "2005-04-15 21:37:39",
            "2005-05-15 22:37:39",
            "2005-06-15 22:37:39",
            "2005-07-15 18:37:39",
            "2005-08-15 19:37:39",
            "2005-09-15 20:37:39",
            "2005-10-15 21:37:39",
            "2005-12-15 22:37:39",
            "2006-01-15 18:37:39",
            "2006-02-15 19:37:39",
            "2006-03-15 20:37:39",
            "2006-04-15 21:37:39",
            "2006-05-15 22:37:39",
            "2006-06-15 22:37:39",
            "2006-07-15 18:37:39",
            "2006-08-15 19:37:39",
            "2006-09-15 20:37:39",
            "2006-10-15 21:37:39",
            "2006-12-15 22:37:39",
            "2007-01-15 18:37:39",
            "2007-02-15 19:37:39",
            "2007-03-15 20:37:39",
            "2007-04-15 21:37:39",
            "2007-05-15 22:37:39",
            "2007-06-15 22:37:39",
            "2007-07-15 18:37:39",
            "2007-08-15 19:37:39",
            "2007-09-15 20:37:39",
            "2007-10-15 21:37:39",
            "2007-12-15 22:37:39",
            "2008-01-15 18:37:39",
            "2008-02-15 19:37:39",
            "2008-03-15 20:37:39",
            "2008-04-15 21:37:39",
            "2008-05-15 22:37:39",
            "2008-06-15 22:37:39",
            "2008-07-15 18:37:39",
            "2008-08-15 19:37:39",
            "2008-09-15 20:37:39",
            "2008-10-15 21:37:39",
            "2008-12-15 22:37:39",
            "2009-01-15 18:37:39",
            "2009-02-15 19:37:39",
            "2009-03-15 20:37:39",
            "2009-04-15 21:37:39",
            "2009-05-15 22:37:39",
            "2009-06-15 22:37:39",
            "2009-07-15 18:37:39",
            "2009-08-15 19:37:39",
            "2009-09-15 20:37:39",
            "2009-10-15 21:37:39",
            "2009-12-15 22:37:39",
            "2010-01-15 18:37:39",
            "2010-02-15 19:37:39",
            "2010-03-15 20:37:39",
            "2010-04-15 21:37:39",
            "2010-05-15 22:37:39",
            "2010-06-15 22:37:39",
            "2010-07-15 18:37:39",
            "2010-08-15 19:37:39",
            "2010-09-15 20:37:39",
            "2010-10-15 21:37:39",
            "2010-12-15 22:37:39",
            "2011-01-15 18:37:39",
            "2011-02-15 19:37:39",
            "2011-03-15 20:37:39",
            "2011-04-15 21:37:39",
            "2011-05-15 22:37:39",
            "2011-06-15 22:37:39",
            "2011-07-15 18:37:39",
            "2011-08-15 19:37:39",
            "2011-09-15 20:37:39",
            "2011-10-15 21:37:39",
            "2011-12-15 22:37:39",
            "2012-01-15 18:37:39",
            "2012-02-15 19:37:39",
            "2012-03-15 20:37:39",
            "2012-04-15 21:37:39",
            "2012-05-15 22:37:39",
            "2012-06-15 22:37:39",
            "2012-07-15 18:37:39",
            "2012-08-15 19:37:39",
            "2012-09-15 20:37:39",
            "2012-10-15 21:37:39",
            "2012-12-15 22:37:39",
            "2013-01-15 18:37:39",
            "2013-02-15 19:37:39",
            "2013-03-15 20:37:39",
            "2013-04-15 21:37:39",
            "2013-05-15 22:37:39",
            "2013-06-15 22:37:39",
            "2013-07-15 18:37:39",
            "2013-08-15 19:37:39",
            "2013-09-15 20:37:39",
            "2013-10-15 21:37:39",
            "2013-12-15 22:37:39",
            "2014-01-15 18:37:39",
            "2014-02-15 19:37:39",
            "2014-03-15 20:37:39",
            "2014-04-15 21:37:39",
            "2014-05-15 22:37:39",
            "2014-06-15 22:37:39",
            "2014-07-15 18:37:39",
            "2014-08-15 19:37:39",
            "2014-09-15 20:37:39",
            "2014-10-15 21:37:39",
            "2014-12-15 22:37:39",
            "2015-01-15 18:37:39",
            "2015-02-15 19:37:39",
            "2015-03-15 20:37:39",
            "2015-04-15 21:37:39",
            "2015-05-15 22:37:39",
            "2015-06-15 22:37:39",
            "2015-07-15 18:37:39",
            "2015-08-15 19:37:39",
            "2015-09-15 20:37:39",
            "2015-10-15 21:37:39",
            "2015-12-15 22:37:39",
            "2016-01-15 18:37:39",
            "2016-02-15 19:37:39",
            "2016-03-15 20:37:39",
            "2016-04-15 21:37:39",
            "2016-05-15 22:37:39",
            "2016-06-15 22:37:39",
            "2016-07-15 18:37:39",
            "2016-08-15 19:37:39",
            "2016-09-15 20:37:39",
            "2016-10-15 21:37:39",
            "2016-12-15 22:37:39",
            "2017-01-15 18:37:39",
            "2017-02-15 19:37:39",
            "2017-03-15 20:37:39",
            "2017-04-15 21:37:39",
            "2017-05-15 22:37:39",
            "2017-06-15 22:37:39",
            "2017-07-15 18:37:39",
            "2017-08-15 19:37:39",
            "2017-09-15 20:37:39",
            "2017-10-15 21:37:39",
            "2017-12-15 22:37:39",
            "2018-01-15 18:37:39",
            "2018-02-15 19:37:39",
            "2018-03-15 20:37:39",
            "2018-04-15 21:37:39",
            "2018-05-15 22:37:39",
            "2018-06-15 22:37:39",
            "2018-07-15 18:37:39",
            "2018-08-15 19:37:39",
            "2018-09-15 20:37:39",
            "2018-10-15 21:37:39",
            "2018-12-15 22:37:39",
            "2019-01-15 18:37:39",
            "2019-02-15 19:37:39",
            "2019-03-15 20:37:39",
            "2019-04-15 21:37:39",
            "2019-05-15 22:37:39",
            "2019-06-15 22:37:39",
            "2019-07-15 18:37:39",
            "2019-08-15 19:37:39",
            "2019-09-15 20:37:39",
            "2019-10-15 21:37:39",
            "2019-12-15 22:37:39",
            "2020-01-15 18:37:39",
            "2020-02-15 19:37:39",
            "2020-03-15 20:37:39",
            "2020-04-15 21:37:39",
            "2020-05-15 22:37:39",
            "2020-06-15 22:37:39",
            "2020-07-15 18:37:39",
            "2020-08-15 19:37:39",
            "2020-09-15 20:37:39",
            "2020-10-15 21:37:39",
            "2020-12-15 22:37:39",
            "2021-01-15 18:37:39",
            "2021-02-15 19:37:39",
            "2021-03-15 20:37:39",
            "2021-04-15 21:37:39",
            "2021-05-15 22:37:39",
            "2021-06-15 22:37:39",
            "2021-07-15 18:37:39",
            "2021-08-15 19:37:39",
            "2021-09-15 20:37:39",
            "2021-10-15 21:37:39",
            "2021-12-15 22:37:39",
            "2022-01-15 18:37:39",
            "2022-02-15 19:37:39",
            "2022-03-15 20:37:39",
            "2022-04-15 21:37:39",
            "2022-05-15 22:37:39",
            "2022-06-15 22:37:39",
            "2022-07-15 18:37:39",
            "2022-08-15 19:37:39",
            "2022-09-15 20:37:39",
            "2022-10-15 21:37:39",
            "2022-12-15 22:37:39",
          ],
          datasets: [
            {
              label: "Net Value",
              fill: false,
              backgroundColor: "#FCBB0A",
              backgroundColor: "#59A7C4",
              // backgroundColor: "rgba(255,255,255,.8)",
              pointBackgroundColor: "#59A7C4",
              borderColor: "#59A7C4",
              pointHighlightStroke: "#59A7C4",
              borderCapStyle: "butt",
              data: [
                2.1,
                2.5,
                2.4,
                2.3,
                2.9,
                2.6,
                2.1,
                2.5,
                2.9,
                3,
                3.1,
                3.01,
                3.05,
                3.04,
                3.03,
                3.09,
                3.06,
                3.01,
                3.05,
                3.09,
                3.6,
                3.1,
                3.9,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                3.1,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                4.1,
                2.9,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                4.1,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                2.1,
                2.5,
                2.4,
                2.3,
                2.9,
                2.6,
                2.1,
                2.5,
                2.9,
                3,
                3.1,
                3.01,
                3.05,
                3.04,
                3.03,
                3.09,
                3.06,
                3.01,
                3.05,
                3.09,
                3.6,
                3.1,
                3.9,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                3.1,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                4.1,
                2.9,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                4.1,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                2.1,
                2.5,
                2.4,
                2.3,
                2.9,
                2.6,
                2.1,
                2.5,
                2.9,
                3,
                3.1,
                3.01,
                3.05,
                3.04,
                3.03,
                3.09,
                3.06,
                3.01,
                3.05,
                3.09,
                3.6,
                3.1,
                3.9,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                3.1,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                4.1,
                2.9,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                4.1,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                2.1,
                2.5,
                2.4,
                2.3,
                2.9,
                2.6,
                2.1,
                2.5,
                2.9,
                3,
                3.1,
                3.01,
                3.05,
                3.04,
                3.03,
                3.09,
                3.06,
                3.01,
                3.05,
                3.09,
                3.6,
                3.1,
                3.9,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                3.1,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                4.1,
                2.9,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                4.1,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                2.1,
                2.5,
                2.4,
                2.3,
                2.9,
                2.6,
                2.1,
                2.5,
                2.9,
                3,
                3.1,
                3.01,
                3.05,
                3.04,
                3.03,
                3.09,
                3.06,
                3.01,
                3.05,
                3.09,
                3.6,
                3.1,
                3.9,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                3.1,
                3.1,
                3.5,
                3.4,
                3.3,
                3.9,
                3.6,
                3.1,
                3.5,
                3.9,
                3,
                4.1,
                2.9,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                4.1,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                2.5,
                2.9,
                3,
                3.1,
                2.9,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                3.1,
                2.1,
                3.5,
                3.4,
                2.3,
                2.9,
                3.6,
                3.1,
                2.5,
                2.9,
                3,
                3.1,
                2.9,
              ],
            },
          ],
        },
        options: {
          borderWidth: 0,
          pointRadius: 0,
          showPoints: false,
          showLine: false,
          stacked: true,
          tooltips: { enabled: false },
          responsive: true,
          maintainAspectRatio: false,
          // legendCallback: function (chart) {
          //   for (var i = 0; i < chart.data.datasets[0].data.length; i++) {
          //     console.log(chart.data.labels[i]);
          //     // return `<p><span class="lineLegend"></span>${chart.data.labels[0]}</p>`;
          //   }
          //   return 'legend'
          // },
          line: {
            borderWidth: 0,
            showLine: false,
          },
          elements: {
            point: {
              radius: 0,
            },
          },
          legend: {
            position: "bottom",
            align: "center",
            labels: {
              fontSize: 15,
              boxWidth: 12,
            },
          },
          // Can't just just `stacked: true` like the docs say
          scales: {
            
            yAxes: [
              {
                ticks: {
                  reverse: false,
                  beginAtZero: true,
                  steps: 5,
                  stepSize: 1,
                  max: 5,
                  fontColor: "black",
                  callback: function (value, index, values) {
                    return `${value}.00%`;
                  },
                },
                stacked: true,
                display: true,
              },
            ],
            xAxes: [
              {
                type: "time",
                ticks: {
                  reverse: false,
                  beginAtZero: true,
                },
                display: true,
                stacked: true,
                scaleLabel: {
                  display: true,
                },
              },
            ],
          },
          animation: {
            duration: 750,
          },
        },
      },

      activeComponent: "cumulative",
      activeOldIndex: 0,
      activeCurrentIndex: 0,

      activeGridType: "graph",
      oldActiveGridTypeIndex: 0,
      currentActiveGridTypeIndex: 0,

      budget: true,
      options: false,
    };
  },
  methods: {
    expand(event) {
      // const dropdown = event.target.nextElementSibling;
      const dropdown = event.target.parentElement;
      dropdown.classList.toggle("expand");
      if (dropdown.classList.contains("expand")) {
        event.target.classList.add("rounded-t-full");
        event.target.classList.remove("rounded-full");
      } else {
        event.target.classList.remove("rounded-t-full");
        event.target.classList.add("rounded-full");
      }
      // const targetDropdown = event.target.parentElement;
      // targetDropdown.classList.toggle("expand");
    },
  },
};
</script>

<style lang="scss" scoped>
.doughnut__chart,
.line__chart {
  max-height: 200px;
}

// dropdown menu
.dropdown {
  button {
    outline: none;
  }
  .dropdown-icon {
    pointer-events: none;
  }
  .dropdown__menu {
    @apply w-full rounded-b-3xl;
    overflow-y: auto;
    /* this will hide the scrollbar in mozilla based browsers */
    overflow: -moz-scrollbars-none;
    &::-webkit-scrollbar {
      width: 0;
      display: none;
    }
    /* this will hide the scrollbar in internet explorers */
    -ms-overflow-style: none; /* IE 11 */
    scrollbar-width: none; /* Firefox 64 */
    max-height: 0;
    // transform: scaleY(0);
    transform-origin: top;
    z-index: 100;
    transition: transform 0.5s linear, max-height 0.5s linear;
    @apply px-4 text-gray-100;
  }

  &.expand {
    .dropdown__menu {
      max-height: 200px;
      // transform:scaleY(1);
    }
    .dropdown-icon {
      transform: rotate(180deg) !important;
    }
  }
}
</style>